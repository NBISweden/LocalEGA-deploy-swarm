import se.nbis.lega.deployment.Groups
import se.nbis.lega.deployment.cluster.CreateMachineTask
import se.nbis.lega.deployment.cluster.ListTask
import se.nbis.lega.deployment.cluster.Machine
import se.nbis.lega.deployment.cluster.RemoveMachineTask
import se.nbis.lega.deployment.cluster.ListServicesTask
import se.nbis.lega.deployment.cluster.ServiceLogsTask

task createCEGAMachine(type: CreateMachineTask) {
    setGroup Groups.CLUSTER.getName()

    setMachineName Machine.CEGA.getName()
}

task createLEGAPublicMachine(type: CreateMachineTask) {
    setGroup Groups.CLUSTER.getName()

    setMachineName Machine.LEGA_PUBLIC.getName()
}

task createLEGAPrivateMachine(type: CreateMachineTask) {
    setGroup Groups.CLUSTER.getName()

    setMachineName Machine.LEGA_PRIVATE.getName()
}

task provision() {
    setGroup Groups.CLUSTER.getName()

    dependsOn ":cluster:createCEGAMachine", ":cluster:createLEGAPublicMachine", ":cluster:createLEGAPrivateMachine"
}

task removeCEGAMachine(type: RemoveMachineTask) {
    setGroup Groups.CLUSTER.getName()

    setMachineName Machine.CEGA.getName()
}

task removeLEGAPublicMachine(type: RemoveMachineTask) {
    setGroup Groups.CLUSTER.getName()

    setMachineName Machine.LEGA_PUBLIC.getName()
}

task removeLEGAPrivateMachine(type: RemoveMachineTask) {
    setGroup Groups.CLUSTER.getName()

    setMachineName Machine.LEGA_PRIVATE.getName()
}

task destroy() {
    setGroup Groups.CLUSTER.getName()

    dependsOn ":cluster:removeCEGAMachine", ":cluster:removeLEGAPublicMachine", ":cluster:removeLEGAPrivateMachine"
}

task list(type: ListTask)
task listServices(type: ListServicesTask)
task serviceLogs(type: ServiceLogsTask)
